<script setup>
/*--------------------------------------------------------------------------------------------------------------------*/

import { watch } from 'vue';

import Modal from 'bootstrap/js/src/modal';

/*--------------------------------------------------------------------------------------------------------------------*/

import useMessageStore from '../stores/messages';

/*--------------------------------------------------------------------------------------------------------------------*/

const messageStore = useMessageStore();

/*--------------------------------------------------------------------------------------------------------------------*/

const props = defineProps({
    deviceName: {
        type: String,
        default: '',
    },
});

/*--------------------------------------------------------------------------------------------------------------------*/

const openModal = () => {

    new Modal(document.getElementById('indi_console')).show();

    messageStore.setMessages(props.deviceName);
};

/*--------------------------------------------------------------------------------------------------------------------*/

watch(() => [messageStore.messages], () => {

   messageStore.updateMessages();

}, {
    immediate: true,
    deep: false,
});

/*--------------------------------------------------------------------------------------------------------------------*/
</script>

<template>

    <!-- *********************************************************************************************************** -->

    <button class="btn btn-xs btn-secondary" type="button" @click="openModal()">
        <i class="bi bi-card-text"></i>
        logs
    </button>

    <!-- *********************************************************************************************************** -->

</template>
